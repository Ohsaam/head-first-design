### 해당 코드의 문제점

- 결제 방식 강결합: 새로운 결제 시스템 추가시 핸들러 클래스 직접 수정 필요

- 통화 변환 책임 분산: USD 변환 로직이 특정 결제 방식 구현에 하드코딩됨

- 예외 처리 불일치: 각 결제 방식별 성공/실패 처리 방식이 상이

- 유닛 테스트 어려움: 외부 시스템에 대한 직접 의존성

- 트랜잭션 관리 누락: 결제 실패시 보상 트랜잭션 처리 메커니즘 없음

### 개선 방향 힌트

- PaymentGateway 인터페이스 정의 (charge/refund 메서드)

- 각 결제 시스템을 감싸는 Adapter 클래스 생성

- 핸들러가 어댑터들을 관리하는 방식으로 변경

- 팩토리 패턴을 결합해 결제 방식별 어댑터 생성 자동화

- 커맨드 패턴과 조합하여 트랜잭션 관리 기능 추가